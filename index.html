<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="css/bootflat.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <title>_zorpg</title>

        <style>
            textarea{width:100%}
            /*body{background-color:#000}
            .container{background-color:#333; color:#fff} */
        </style>
    </head>

    <body>
        <div class="container">
            <h4>_zorpg</h4>
            <div id="game"></div>
            <hr />
            <canvas id="3d" style="width: 600px;height: 480px"></canvas>
        </div>

        <script src="js/jquery.js"></script>
        <script src="js/bootflat.js"></script>
        <script src="js/babylon.js"></script>
        <script src="js/babylon-gui.js"></script>
        <script type="text/javascript" src="js/game.js"></script>

        <script>

        // Init states
        ZORPG.State.add("load", {
            init: function() {
                console.log("Loading...");
            },
            destroy: function() {
                console.log("Loading finished.");
            }
        });

        ZORPG.State.add("main_menu", {
            name: "MAin MEnu",

            init: function() {
                console.log("Main menu.");

                var canvas = document.getElementById("3d");
                var engine = new BABYLON.Engine(canvas, true);
                ZORPG.scene = new BABYLON.Scene(engine);

                // Camera
                var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 5, -10), ZORPG.scene);
                camera.setTarget(BABYLON.Vector3.Zero());
                camera.attachControl(canvas, true);

                // Light
                var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), ZORPG.scene);
                light.intensity = 0.7;

                // Setup content
                var sphere = BABYLON.Mesh.CreateSphere("sphere1", 16, 2, ZORPG.scene);
                sphere.position.y = 1;
                //var ground = BABYLON.Mesh.CreateGround("ground1", 6, 6, 2, scene);

                // GUI
                ZORPG.GUI = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
                var splash = new BABYLON.GUI.Image("splash", "img/splash.png");

                var button1 = BABYLON.GUI.Button.CreateSimpleButton("but1", "Click to Start");
                button1.width = "150px"
                button1.height = "40px";
                button1.color = "white";
                button1.cornerRadius = 20;
                button1.background = "green";
                button1.onPointerUpObservable.add(function() {
                    ZORPG.GUI.removeControl(button1);
                    ZORPG.GUI.removeControl(splash);
                    ZORPG.State.set("play");
                });

                ZORPG.GUI.addControl(splash);
                ZORPG.GUI.addControl(button1);


                // Rendering loop
                engine.runRenderLoop(function () {
                    ZORPG.scene.render();
                });
            },

            destroy: function() {}
        });

        ZORPG.State.add("play", {
            name: "Playing",

            init: function() {
                console.log("Main menu.");
                var ground = BABYLON.Mesh.CreateGround("ground1", 6, 6, 2, ZORPG.scene);
            },

            destroy: function() {}
        });
        // Start
        ZORPG.State.set("main_menu");
        </script>
    </body>
</html>